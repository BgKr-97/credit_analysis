# Автоматизированная система анализа просроченных клиентов

### Цель проекта
- Спроектировать DWH с таблицами Loans (ID, клиент, сумма, срок, статус) и Clients (ID, имя).
- Реализовать ETL для загрузки JSON, пометить кредиты как просроченные (дата > срока), вычислить процент просрочки.
- Создать BI-витрину: график доли просрочек по месяцам, фильтр по сумме.
- Провести тестирование на 10 записях.
- Предложить оптимизацию процесса уведомления клиентов.
- Усложнение: вычисления и тестирование.

### Исходные данные проекта

- таблица Clients: содержит подробную информацию о каждом клиенте;
- таблица Loans: содержит информацию о кредитах клиентов;
- таблица Payments: содержит историчную информацию о платежах клиентов.

### Хранилище данных
Система предусматривает хранение данных в едином хранилище данных (ЕХД), разделенном на несколько слоев:
- слой staging - здесь хранятся «сырые» загрузки из JSON-файлов, хранящих информацию о клиентах, их кредитах и истории платежей;
- слой core - здесь хранятся данные, преобразованные со слоя staging без затирания;
- слой mart - здесь формируется витрина для BI — агрегированные и подготовленные для отчёта данные.

# Пример финального предоставления отчета через Power BI


## 4. Создание структуры DWH:
В проекте реализован автоматический механизм создания структуры БД - через исполнение SQL-скриптов. Вызов данных скриптов автоматизирован - он осуществляется через обработку аргументов командной строки с помощью `argparse`. То есть, чтобы запустить процесс инициализации БД, достаточно выполнить соответствующую команду:
``` Python
python main.py shema
```
В ответ на этот аргумент код сам найдет и выполнит нужные SQL-файлы, создав все схемы и таблицы в нужном порядке.

### Генерация/загрузка/преобразование данных
## 1. Генерация данных
В проекте реализована инкрементная загрузка данных в БД, а не полным дампом каждый раз — это стандартный и осознанный подход в продакшн-системах.
1. Указав параметры для генерации данных, команда 
``` Python
python main.py generate
```
сгенерирует "сырые" данные в виде трех JSON-файлов (clients.json, loans.json и payments.json) и сохранит их в указанную в файле `.env` папку.

2. Команда 
``` Python
python main.py split
```
разделит все сгенерированные JSON-файлы на n частей (по умолчанию `n = 5`), и сохранит их в указанную в файле `.env` папку.


















